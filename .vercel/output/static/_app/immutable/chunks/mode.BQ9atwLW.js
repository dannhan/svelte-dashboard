import{B as y}from"./scheduler.Cglc-E-6.js";import{d as p,w as u}from"./index.C4PciY-_.js";let h,g;function k(t){if(typeof document>"u")return;clearTimeout(h),clearTimeout(g);const n=document.createElement("style"),s=document.createTextNode(`* {
     -webkit-transition: none !important;
     -moz-transition: none !important;
     -o-transition: none !important;
     -ms-transition: none !important;
     transition: none !important;
  }`);n.appendChild(s);const e=()=>document.head.appendChild(n),o=()=>document.head.removeChild(n);if(typeof window.getComputedStyle<"u"){e(),t(),window.getComputedStyle(n).opacity,o();return}if(typeof window.requestAnimationFrame<"u"){e(),t(),window.requestAnimationFrame(o);return}e(),h=window.setTimeout(()=>{t(),g=window.setTimeout(o,120)},120)}const b={getItem:t=>null,setItem:(t,n)=>{}},c=typeof document<"u",v=["dark","light","system"],l="mode-watcher-mode",m=I(),S=L(),M=u(void 0),E=V();function I(){const t="system",n=c?localStorage:b,s=n.getItem(l);let e=w(s)?s:t;const{subscribe:o,set:r}=u(e,()=>{if(!c)return;const a=d=>{if(d.key!==l)return;const f=d.newValue;w(f)?r(e=f):r(e=t)};return addEventListener("storage",a),()=>removeEventListener("storage",a)});function i(a){r(e=a),n.setItem(l,e)}return{subscribe:o,set:i}}function L(){let n=!0;const{subscribe:s,set:e}=u(void 0,()=>{if(!c)return;const i=d=>{n&&e(d.matches?"light":"dark")},a=window.matchMedia("(prefers-color-scheme: light)");return a.addEventListener("change",i),()=>a.removeEventListener("change",i)});function o(){if(!c)return;const i=window.matchMedia("(prefers-color-scheme: light)");e(i.matches?"light":"dark")}function r(i){n=i}return{subscribe:s,query:o,tracking:r}}function V(){const{subscribe:t}=p([m,S,M],([n,s,e])=>{if(!c)return;const o=n==="system"?s:n;return k(()=>{const r=document.documentElement,i=document.querySelector('meta[name="theme-color"]');o==="light"?(r.classList.remove("dark"),r.style.colorScheme="light",i&&e&&i.setAttribute("content",e.light)):(r.classList.add("dark"),r.style.colorScheme="dark",i&&e&&i.setAttribute("content",e.dark))}),o});return{subscribe:t}}function w(t){return typeof t!="string"?!1:v.includes(t)}function _(){m.set(y(E)==="dark"?"light":"dark")}function q(t){m.set(t)}function x(t,n){const s=document.documentElement,e=localStorage.getItem("mode-watcher-mode")||t,o=e==="light"||e==="system"&&window.matchMedia("(prefers-color-scheme: light)").matches;if(s.classList[o?"remove":"add"]("dark"),s.style.colorScheme=o?"light":"dark",n){const r=document.querySelector('meta[name="theme-color"]');r&&r.setAttribute("content",e==="light"?n.light:n.dark)}localStorage.setItem("mode-watcher-mode",e)}export{M as a,S as b,q as c,E as d,w as i,l,x as s,_ as t};
